{% extends 'dashboard/base.html' %}
{% load static %}

    <!-- TITLE -->
    {% block title %}
        beeLabbs | Dashboard | Transactions
    {% endblock title %}

    <!-- HEADING -->
    {% block heading %}
        TRANSACTIONS
    {% endblock heading %}
    
    <!-- MAIN CONTENT -->
    {% block content %}
        <!-- TRANSACTIONS -->
        <section class="summary px-lg-5 px-3 py-3">
            <div class="row">
                <div class="col-md-12">
                    <p><strong style="color:rgb(10, 223, 165); font-size: 18px;">Total Deposit</strong></p>
                    <!-- Dark table with striped rows -->
                    <div class="table-responsive">
                        <table class="table table-dark table-striped">
                            <thead>
                                <tr>
                                <th>Type</th>
                                <th>Amount</th>
                                <th>View</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for i in sub %}
                                    <tr>
                                        <td style="line-height: 1.3;">
                                            {{ i.type }} <br>
                                            <span style="font-size: 11px;"><em>{{ i.status }}</em></span>
                                        </td>
                                        <td style="padding-top: 20px;">${{ i.sub_amount }}</td>
                                        <td class="view" data-bs-toggle="modal" 
                                        data-bs-target="#modalId{{ i.pk }}">
                                        <a style="text-decoration: none;" href="#dep{{ i.pk }}" aria-controls="modal{{ i.pk }}">View</a>
                                        </td>
                                    </tr>
                                    <!-- MODAL POPUP -->
                                    <div class="modal fade" id="modalId{{ i.pk }}" tabindex="-1" role="dialog">
                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                            <div class="modal-content" style="background: #141822;">
                                                <div class="modal-header">
                                                    <p class="modal-title">
                                                        <span style="color: rgb(39, 179, 252);">{{ i.type }} |</span> 
                                                        <span>${{ i.sub_amount }} </span> 
                                                        <span style="color: rgb(10, 223, 165);">0.0051 BTC</span>
                                                    </p>
                                                    <button type="button" class="btn-close bg-light" data-bs-dismiss="modal" 
                                                    aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body pb-1">
                                                    <div id="" class="mb-2 px-3 text-light" 
                                                    style="background: #30333c; border-radius: 10px;">
                                                        <p class="py-2 mb-1">
                                                            Sender
                                                            <span style="float: right; color: rgb(39, 179, 252);">
                                                                {{ i.user|title }}
                                                            </span> <hr>
                                                        </p>
                                                        <p class="mb-2">
                                                            Status
                                                            <span style="float: right; color: rgb(10, 223, 165);"><em>
                                                                {{ i.status }}
                                                            </em></span> <hr>
                                                        </p>
                                                        <p class="mb-2">
                                                            Initiated on
                                                            <span style="float: right; color: rgb(39, 179, 252);">
                                                                {{ i.initiated_on }}
                                                            </span> <hr>
                                                        </p>
                                                        <p class="py-2 mt-0 pt-0">
                                                            Verified on
                                                            <span style="float: right;color: rgb(39, 179, 252);">
                                                                {{ i.verified_on|default:'Not verified' }}
                                                            </span>
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="modal-footer modal-close">
                                                    <button type="button" class="btn btn-outline-primary btn-sm" 
                                                    data-bs-dismiss="modal">Go Back</button>
                                                </div>
                                            </div>
                                                <!-- #30333c -->
                                                <!-- #141822 -->
                                        </div>
                                    </div>
                                {% empty %}
                                    <tr>
                                        <td><em>No transaction to display at the moment.</em></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Pagination -->
                <div class="d-flex justify-content-center pt-3">
                    {% include 'dashboard/includes/pagination.html' with page=sub %}
                </div>
            </div>  
        </section>

        <style>
            .modal-close .btn-outline-primary {
            border: 2px solid rgb(47, 100, 143) !important;
            }
            .modal-close .btn-outline-primary:hover,
            .modal-close .btn-outline-primary:focus {
                background: rgb(16, 61, 97) !important;
                border: 2px solid rgb(16, 61, 97) !important;
            }
            .view {
                /* position: absolute; */
                border: 1px solid rgb(10, 223, 165);
                padding: 2px 15px !important;
                display: inline-block;
                margin-top: 20px;
                border-radius: 5px;
                margin-left: 12px;
                cursor: pointer;
            }
            .view:hover,
            .view:focus {
                background: rgb(10, 223, 165) !important;
            }
            .table-striped>tbody>tr:nth-of-type(odd)>* {
                color: '';
            }
            .table-dark {
                --si-table-striped-bg: #30333c;
            }
        </style>
    {% endblock content %}
        